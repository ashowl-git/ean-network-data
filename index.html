<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EAN ë„¤íŠ¸ì›Œí¬ ë°ì´í„° ì‹œê°í™”</title>
    <style>
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ ìŠ¤íƒ€ì¼ */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .stat-label {
            color: #666;
            margin-top: 5px;
        }
        
        .data-preview {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .json-preview {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        
        .error {
            color: #e74c3c;
            text-align: center;
            padding: 20px;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ë¡œë”© í™”ë©´ -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <div>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    </div>
    
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div id="container" class="container">
        <div class="header">
            <h1>ğŸŒ EAN ë„¤íŠ¸ì›Œí¬ ë°ì´í„°</h1>
            <p>ì‹¤ì‹œê°„ìœ¼ë¡œ ë¡œë“œëœ JSON ë°ì´í„° ì‹œê°í™”</p>
        </div>
        
        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="stats">
            <div class="stat-card">
                <div id="nodeCount" class="stat-number">-</div>
                <div class="stat-label">ì´ ë…¸ë“œ ìˆ˜</div>
            </div>
            <div class="stat-card">
                <div id="linkCount" class="stat-number">-</div>
                <div class="stat-label">ì´ ë§í¬ ìˆ˜</div>
            </div>
            <div class="stat-card">
                <div id="dataSize" class="stat-number">-</div>
                <div class="stat-label">ë°ì´í„° í¬ê¸°</div>
            </div>
            <div class="stat-card">
                <div id="loadTime" class="stat-number">-</div>
                <div class="stat-label">ë¡œë”© ì‹œê°„</div>
            </div>
        </div>
        
        <!-- ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° -->
        <div class="data-preview">
            <h3>ğŸ“Š ë°ì´í„° ë¯¸ë¦¬ë³´ê¸°</h3>
            <div id="jsonPreview" class="json-preview">
                ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
            </div>
        </div>
    </div>
    
    <!-- ì—ëŸ¬ í‘œì‹œ -->
    <div id="error" class="error" style="display: none;">
        <h2>âŒ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨</h2>
        <p>JSON íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let networkData = null;
        const startTime = performance.now();
        
        // íŒŒì¼ í¬ê¸°ë¥¼ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // ë¡œë”© ì‹œê°„ì„ ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ í‘œì‹œ
        function formatLoadTime(ms) {
            if (ms < 1000) return Math.round(ms) + 'ms';
            return (ms / 1000).toFixed(2) + 's';
        }
        
        // JSON ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° ìƒì„±
        function generatePreview(data) {
            const preview = {
                summary: {
                    totalNodes: data.nodes ? data.nodes.length : 0,
                    totalLinks: data.links ? data.links.length : 0,
                    dataStructure: Object.keys(data)
                },
                sampleNode: data.nodes ? data.nodes[0] : null,
                sampleLink: data.links ? data.links[0] : null
            };
            
            return JSON.stringify(preview, null, 2);
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats(data, loadTime, dataSize) {
            document.getElementById('nodeCount').textContent = 
                data.nodes ? data.nodes.length.toLocaleString() : '0';
            document.getElementById('linkCount').textContent = 
                data.links ? data.links.length.toLocaleString() : '0';
            document.getElementById('dataSize').textContent = formatFileSize(dataSize);
            document.getElementById('loadTime').textContent = formatLoadTime(loadTime);
        }
        
        // JSON ë°ì´í„° ë¹„ë™ê¸° ë¡œë”©
        async function loadNetworkData() {
            try {
                console.log('ğŸ”„ JSON ë°ì´í„° ë¡œë”© ì‹œì‘...');
                
                // fetchë¡œ JSON íŒŒì¼ ë¹„ë™ê¸° ë¡œë”©
                const response = await fetch('ean_full_network_data.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // ì‘ë‹µ í¬ê¸° ê³„ì‚°
                const contentLength = response.headers.get('content-length');
                const dataSize = contentLength ? parseInt(contentLength) : 0;
                
                // JSON íŒŒì‹±
                networkData = await response.json();
                
                const endTime = performance.now();
                const loadTime = endTime - startTime;
                
                console.log('âœ… JSON ë°ì´í„° ë¡œë”© ì™„ë£Œ:', {
                    nodes: networkData.nodes?.length || 0,
                    links: networkData.links?.length || 0,
                    loadTime: formatLoadTime(loadTime),
                    dataSize: formatFileSize(dataSize)
                });
                
                // UI ì—…ë°ì´íŠ¸
                updateStats(networkData, loadTime, dataSize);
                document.getElementById('jsonPreview').textContent = generatePreview(networkData);
                
                // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê³  ë©”ì¸ ì»¨í…Œì´ë„ˆ í‘œì‹œ
                document.getElementById('loading').style.display = 'none';
                document.getElementById('container').style.display = 'block';
                
                // ì¶”ê°€ ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° ì—¬ê¸°ì— ì½”ë“œ ì¶”ê°€
                // ì˜ˆ: ë„¤íŠ¸ì›Œí¬ ê·¸ë˜í”„ ê·¸ë¦¬ê¸°, ë°ì´í„° ë¶„ì„ ë“±
                
            } catch (error) {
                console.error('âŒ JSON ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
                
                // ì—ëŸ¬ í™”ë©´ í‘œì‹œ
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë”© ì‹œì‘
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ í˜ì´ì§€ ë¡œë”© ì™„ë£Œ, JSON ë°ì´í„° ë¡œë”© ì‹œì‘...');
            loadNetworkData();
        });
        
        // ê°œë°œììš©: ì „ì—­ì—ì„œ ë°ì´í„° ì ‘ê·¼ ê°€ëŠ¥
        window.getNetworkData = function() {
            return networkData;
        };
    </script>
</body>
</html> 